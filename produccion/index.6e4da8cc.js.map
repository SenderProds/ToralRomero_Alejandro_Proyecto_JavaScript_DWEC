{"mappings":"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","sources":["<anon>","fuente/js/sesion.js"],"sourcesContent":["//Registro\nrecargarSesion();\nfunction recargarSesion() {\n    let liBtnIniciarSesion = document.getElementById(\"btnIniciarSesion\").parentElement;\n    let liBtnRegistro = document.getElementById(\"btnRegistro\").parentElement;\n    let liBtnPrincipal = document.getElementById(\"btnPrincipal\").parentElement;\n    let liBtnCerrarSesion = document.getElementById(\"btnCerrarSesion\").parentElement;\n    if (localStorage.getItem(\"sesion\") == \"true\") {\n        liBtnIniciarSesion.classList.add(\"ocultar\");\n        liBtnRegistro.classList.add(\"ocultar\");\n        liBtnPrincipal.classList.remove(\"ocultar\");\n        liBtnCerrarSesion.classList.remove(\"ocultar\");\n    } else {\n        liBtnIniciarSesion.classList.remove(\"ocultar\");\n        liBtnRegistro.classList.remove(\"ocultar\");\n        liBtnPrincipal.classList.add(\"ocultar\");\n        liBtnCerrarSesion.classList.add(\"ocultar\");\n    }\n}\nbtnRegistro.addEventListener(\"click\", (e)=>{\n    ocultarContenido([\n        formIniciarSesion,\n        contenido\n    ]);\n    contenido.classList.remove(\"display-flex\");\n    document.body.style.height = \"100vh\";\n    formRegistro.classList.remove(\"ocultar\");\n    formRegistro.classList.add(\"registro\");\n});\nformRegistro.addEventListener(\"keydown\", (e)=>{\n    if (!e.target.previousElementSibling.previousElementSibling.value != \" \" && e.target.previousElementSibling.previousElementSibling != null) {\n        e.preventDefault();\n        formRegistro.appendChild(mensajeErrorFormulario(\"Los campos anteriores tienen que ser validos\", formRegistro));\n    }\n});\nformRegistro.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    let inputsRegistro = document.querySelectorAll('#registro input:not([type=\"submit\"])');\n    console.log(inputsRegistro);\n    let camposRellenos = Array.from(inputsRegistro).every((campo)=>{\n        return campo.value != \"\";\n    });\n    if (camposRellenos) {\n        console.log(\"Agregando\");\n        agregarUsuario(inputsRegistro);\n    }\n});\n//Iniciar Sesion\nbtnIniciarSesion.addEventListener(\"click\", (e)=>{\n    document.body.style.height = \"100vh\"; ////\n    ocultarContenido([\n        formRegistro,\n        contenido\n    ]);\n    contenido.classList.remove(\"display-flex\");\n    formIniciarSesion.classList.remove(\"ocultar\");\n    formIniciarSesion.classList.add(\"login\");\n});\n//Formulario de inicio de sesion\nformIniciarSesion.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    let username = document.getElementById(\"username\").value;\n    let password = document.getElementById(\"password\").value;\n    iniciarSesion(username, password);\n});\nbtnCerrarSesion.addEventListener(\"click\", (e)=>{\n    localStorage.setItem(\"sesion\", false);\n    recargarSesion();\n});\n/**\r\n * Lo elementos que esten visibles se ocultan\r\n * @param {*} param0 Elementos\r\n */ function ocultarContenido([...elementos]) {\n    elementos.forEach((elemento)=>{\n        if (!elemento.classList.contains(\"ocultar\")) elemento.classList.add(\"ocultar\");\n    });\n}\n/**\r\n * Si las credenciales son correctas iniciar sesion\r\n * @param {*} usr Nombre de usuario\r\n * @param {*} password Clave del usuario\r\n */ function iniciarSesion(usr, password) {\n    let resultado = comprobarUsuario(usr, password);\n    console.log(resultado);\n    if (resultado) {\n        localStorage.setItem(\"sesion\", true);\n        formIniciarSesion.classList.add(\"ocultar\");\n        contenido.classList.remove(\"ocultar\");\n        contenido.classList.add(\"display-flex\");\n        productosFiltros.classList.add(\"display-flex\");\n        productosFiltros.classList.remove(\"ocultar\");\n        productosContenedor.classList.remove(\"ocultar\");\n        document.body.style.height = \"auto\";\n        recargarSesion();\n    } else formIniciarSesion.appendChild(mensajeErrorFormulario(\"El nombre de usuario o clave no es correcto\", formIniciarSesion));\n}\n/**\r\n * Devuelve si alguno de los usuarios en el almacenamiento coincide con las credenciales\r\n * @param {*} username Nombre de usuario\r\n * @param {*} password Clave del usuario\r\n * @returns Booleano\r\n */ function comprobarUsuario(username, password) {\n    let usuarios = getUsuarios();\n    return usuarios.some((objeto)=>{\n        return objeto.username == username && objeto.password == password;\n    });\n}\n/**\r\n * Retorna un array con todos los usuarios de la api\r\n * @returns Array usuarios\r\n */ function getUsuarios() {\n    return JSON.parse(localStorage.getItem(\"users\"));\n}\n/**\r\n * Agrega el usuario al almacenamiento local\r\n * @param {*} campos Todos los campos del formulario\r\n */ function agregarUsuario(campos) {\n    let nombre = document.getElementById(\"nombre\").value;\n    let apellidos = document.getElementById(\"apellidos\").value;\n    let telefono = document.getElementById(\"telefono\").value;\n    let dni = document.getElementById(\"dni\").value;\n    let edad = document.getElementById(\"edad\").value;\n    let username = document.getElementById(\"usernameReg\").value;\n    let password = document.getElementById(\"passwordReg\").value;\n    let usuarios = getUsuarios();\n    let nuevoUsuario = {\n        name: {\n            firstname: nombre,\n            lastname: apellidos\n        },\n        password: password,\n        phone: telefono,\n        username: username,\n        dni: dni,\n        edad: edad\n    };\n    usuarios.push(nuevoUsuario);\n    localStorage.setItem(\"users\", JSON.stringify(usuarios));\n}\n\n//# sourceMappingURL=index.6e4da8cc.js.map\n","//Registro\r\n\r\nrecargarSesion();\r\n\r\nfunction recargarSesion() {\r\n  let liBtnIniciarSesion = document.getElementById(\"btnIniciarSesion\").parentElement;\r\n  let liBtnRegistro = document.getElementById(\"btnRegistro\").parentElement;\r\n  let liBtnPrincipal = document.getElementById(\"btnPrincipal\").parentElement;\r\n  let liBtnCerrarSesion = document.getElementById(\"btnCerrarSesion\").parentElement;\r\n\r\n  if (localStorage.getItem(\"sesion\") == \"true\") {\r\n    liBtnIniciarSesion.classList.add(\"ocultar\");\r\n    liBtnRegistro.classList.add(\"ocultar\");\r\n\r\n    liBtnPrincipal.classList.remove(\"ocultar\");\r\n    liBtnCerrarSesion.classList.remove(\"ocultar\");\r\n\r\n\r\n  } else {\r\n    liBtnIniciarSesion.classList.remove(\"ocultar\");\r\n    liBtnRegistro.classList.remove(\"ocultar\");\r\n\r\n    liBtnPrincipal.classList.add(\"ocultar\");\r\n    liBtnCerrarSesion.classList.add(\"ocultar\");\r\n  }\r\n}\r\n\r\nbtnRegistro.addEventListener(\"click\", (e) => {\r\n  ocultarContenido([formIniciarSesion, contenido]);\r\n  contenido.classList.remove(\"display-flex\");\r\n\r\n  document.body.style.height = \"100vh\";\r\n  formRegistro.classList.remove(\"ocultar\");\r\n  formRegistro.classList.add(\"registro\");\r\n});\r\n\r\nformRegistro.addEventListener(\"keydown\", (e) => {\r\n  if (\r\n    !e.target.previousElementSibling.previousElementSibling.value != \" \" &&\r\n    e.target.previousElementSibling.previousElementSibling != null\r\n  ) {\r\n    e.preventDefault();\r\n    formRegistro.appendChild(\r\n      mensajeErrorFormulario(\r\n        \"Los campos anteriores tienen que ser validos\",\r\n        formRegistro\r\n      )\r\n    );\r\n  }\r\n});\r\n\r\nformRegistro.addEventListener(\"submit\", (e) => {\r\n  e.preventDefault();\r\n  let inputsRegistro = document.querySelectorAll(\r\n    '#registro input:not([type=\"submit\"])'\r\n  );\r\n\r\n  console.log(inputsRegistro);\r\n  let camposRellenos = Array.from(inputsRegistro).every((campo) => {\r\n    return campo.value != \"\";\r\n  });\r\n\r\n  if (camposRellenos) {\r\n    console.log(\"Agregando\");\r\n    agregarUsuario(inputsRegistro);\r\n  }\r\n});\r\n\r\n//Iniciar Sesion\r\n\r\nbtnIniciarSesion.addEventListener(\"click\", (e) => {\r\n  document.body.style.height = \"100vh\"; ////\r\n  ocultarContenido([formRegistro, contenido]);\r\n  contenido.classList.remove(\"display-flex\");\r\n  formIniciarSesion.classList.remove(\"ocultar\");\r\n  formIniciarSesion.classList.add(\"login\");\r\n});\r\n\r\n//Formulario de inicio de sesion\r\nformIniciarSesion.addEventListener(\"submit\", (e) => {\r\n  e.preventDefault();\r\n  let username = document.getElementById(\"username\").value;\r\n  let password = document.getElementById(\"password\").value;\r\n  iniciarSesion(username, password);\r\n});\r\n\r\n\r\n  \r\n  btnCerrarSesion.addEventListener(\"click\", (e) => {\r\n    localStorage.setItem(\"sesion\", false);\r\n    recargarSesion();\r\n  });\r\n\r\n\r\n/**\r\n * Lo elementos que esten visibles se ocultan\r\n * @param {*} param0 Elementos\r\n */\r\nfunction ocultarContenido([...elementos]) {\r\n  elementos.forEach((elemento) => {\r\n    if (!elemento.classList.contains(\"ocultar\")) {\r\n      elemento.classList.add(\"ocultar\");\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Si las credenciales son correctas iniciar sesion\r\n * @param {*} usr Nombre de usuario\r\n * @param {*} password Clave del usuario\r\n */\r\nfunction iniciarSesion(usr, password) {\r\n  let resultado = comprobarUsuario(usr, password);\r\n  console.log(resultado);\r\n\r\n  if (resultado) {\r\n    localStorage.setItem(\"sesion\", true);\r\n    formIniciarSesion.classList.add(\"ocultar\");\r\n    contenido.classList.remove(\"ocultar\");\r\n    contenido.classList.add(\"display-flex\");\r\n    productosFiltros.classList.add(\"display-flex\");\r\n    productosFiltros.classList.remove(\"ocultar\");\r\n    productosContenedor.classList.remove(\"ocultar\");\r\n\r\n    document.body.style.height = \"auto\";\r\n    recargarSesion();\r\n  } else {\r\n    formIniciarSesion.appendChild(\r\n      mensajeErrorFormulario(\r\n        \"El nombre de usuario o clave no es correcto\",\r\n        formIniciarSesion\r\n      )\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Devuelve si alguno de los usuarios en el almacenamiento coincide con las credenciales\r\n * @param {*} username Nombre de usuario\r\n * @param {*} password Clave del usuario\r\n * @returns Booleano\r\n */\r\nfunction comprobarUsuario(username, password) {\r\n  let usuarios = getUsuarios();\r\n\r\n  return usuarios.some((objeto) => {\r\n    return objeto.username == username && objeto.password == password;\r\n  });\r\n}\r\n\r\n/**\r\n * Retorna un array con todos los usuarios de la api\r\n * @returns Array usuarios\r\n */\r\nfunction getUsuarios() {\r\n  return JSON.parse(localStorage.getItem(\"users\"));\r\n}\r\n\r\n/**\r\n * Agrega el usuario al almacenamiento local\r\n * @param {*} campos Todos los campos del formulario\r\n */\r\nfunction agregarUsuario(campos) {\r\n  let nombre = document.getElementById(\"nombre\").value;\r\n  let apellidos = document.getElementById(\"apellidos\").value;\r\n  let telefono = document.getElementById(\"telefono\").value;\r\n  let dni = document.getElementById(\"dni\").value;\r\n  let edad = document.getElementById(\"edad\").value;\r\n  let username = document.getElementById(\"usernameReg\").value;\r\n  let password = document.getElementById(\"passwordReg\").value;\r\n\r\n  let usuarios = getUsuarios();\r\n\r\n  let nuevoUsuario = {\r\n    name: {\r\n      firstname: nombre,\r\n      lastname: apellidos,\r\n    },\r\n    password: password,\r\n    phone: telefono,\r\n    username: username,\r\n    dni: dni,\r\n    edad: edad,\r\n  };\r\n\r\n  usuarios.push(nuevoUsuario);\r\n\r\n  localStorage.setItem(\"users\", JSON.stringify(usuarios));\r\n}\r\n"],"names":["recargarSesion","liBtnIniciarSesion","document","getElementById","parentElement","liBtnRegistro","liBtnPrincipal","liBtnCerrarSesion","localStorage","getItem","classList","add","remove","ocultarContenido","elementos","forEach","elemento","contains","getUsuarios","JSON","parse","btnRegistro","addEventListener","e","formIniciarSesion","contenido","body","style","height","formRegistro","target","previousElementSibling","value","preventDefault","appendChild","mensajeErrorFormulario","nombre","apellidos","telefono","dni","edad","username","password","usuarios","inputsRegistro","querySelectorAll","console","log","Array","from","every","campo","push","name","firstname","lastname","phone","setItem","stringify","btnIniciarSesion","usr","resultado","some","objeto","productosFiltros","productosContenedor","btnCerrarSesion"],"version":3,"file":"index.6e4da8cc.js.map"}