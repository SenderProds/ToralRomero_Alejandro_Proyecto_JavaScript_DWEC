{"mappings":"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","sources":["fuente/js/carrito.js"],"sourcesContent":["btnCarritoHeader.addEventListener(\"click\", (e) => {\r\n    \r\n  if (localStorage.getItem(\"sesion\") == 'true') {\r\n    resetearContenido();\r\n    \r\n\r\n    if(document.getElementById('detalle')){\r\n        contenido.removeChild(document.getElementById('detalle'));\r\n    }\r\n\r\n    document.body.style.height = \"100%\";\r\n    crearCarrito();\r\n  }else{\r\n    cargarProductos();\r\n  }\r\n});\r\n\r\nfunction eventoBtnCarrito() {\r\n  let botonesCarrito = document.querySelectorAll(\".carritoProducto\");\r\n\r\n  botonesCarrito.forEach((btnCarrito) => {\r\n    btnCarrito.addEventListener(\"click\", (e) => {\r\n      if (e.target.tagName == \"I\") {\r\n        btnCarritoHeader.classList.add(\"agregarCarrito\");\r\n        agregarCarrito(e.target.parentNode.dataset.id);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nasync function crearCarrito() {\r\n  let sectionCarrito = document.createElement(\"section\");\r\n  sectionCarrito.id = \"carrito\";\r\n  let h1Carrito = document.createElement(\"h1\");\r\n  let listaCarrito = document.createElement(\"ul\");\r\n  let btnRealizarPedido = document.createElement(\"button\");\r\n  if (document.getElementById(\"carrito\")) {\r\n    contenido.removeChild(document.getElementById(\"carrito\"));\r\n  }\r\n\r\n  let pPrecio = document.createElement(\"p\");\r\n  let precioTotal = 0;\r\n  let carrito = obtenerCarrito();\r\n\r\n  for (const key in carrito) {\r\n    let producto = await obtenerProductoPorId(key);\r\n    console.log(producto);\r\n    let li = document.createElement(\"li\");\r\n    let img = document.createElement(\"img\");\r\n    let titulo = document.createElement(\"p\");\r\n    let precio = document.createElement(\"p\");\r\n    let unidades = document.createElement(\"p\");\r\n    let btnAgregar = document.createElement(\"button\");\r\n    let btnQuitarUnidades = document.createElement(\"button\");\r\n    let btnEliminarProducto = document.createElement(\"button\");\r\n\r\n    precioTotal += producto.price * carrito[key];\r\n\r\n    img.src = producto.image;\r\n    titulo.innerHTML = producto.title;\r\n    precio.innerHTML = producto.price;\r\n    unidades.innerHTML = carrito[key];\r\n\r\n    unidades.className = \"unidadesCarrito\";\r\n    btnAgregar.innerHTML =\r\n      '<i class=\"bi bi-plus-circle\"> </i> <span>Agregar</span>';\r\n    btnQuitarUnidades.innerHTML =\r\n      '<i class=\"bi bi-x-circle\"></i> <span>Quitar</span>';\r\n    btnEliminarProducto.innerHTML =\r\n      '<i class=\"bi bi-trash\"></i> <span>Eliminar del Carrito</span>';\r\n\r\n    btnAgregar.addEventListener(\"click\", (e) => {\r\n      if (e.target.tagName == \"I\") {\r\n        agregarCarrito(producto.id);\r\n        actualizarUnidadesCarrito(\r\n          e.target.parentNode.parentNode.querySelector(\".unidadesCarrito\"),\r\n          producto.id\r\n        );\r\n        actualizarPrecioTotalCarrito();\r\n      }\r\n    });\r\n\r\n    btnQuitarUnidades.addEventListener(\"click\", (e) => {\r\n      if (e.target.tagName == \"I\") {\r\n        let unid = eliminarUnidadesCarrito(producto.id);\r\n        actualizarUnidadesCarrito(\r\n          e.target.parentNode.parentNode.querySelector(\".unidadesCarrito\"),\r\n          producto.id\r\n        );\r\n        actualizarPrecioTotalCarrito();\r\n        console.log(unid);\r\n        if (unid < 1 || unid == undefined) {\r\n          crearCarrito();\r\n        }\r\n      }\r\n    });\r\n\r\n    btnEliminarProducto.addEventListener(\"click\", (e) => {\r\n      if (e.target.tagName == \"I\") {\r\n        eliminarProductoCarrito(producto.id);\r\n        crearCarrito();\r\n      }\r\n    });\r\n\r\n    agregarHijos(\r\n      [\r\n        img,\r\n        titulo,\r\n        precio,\r\n        unidades,\r\n        btnAgregar,\r\n        btnQuitarUnidades,\r\n        btnEliminarProducto,\r\n      ],\r\n      li\r\n    );\r\n    listaCarrito.appendChild(li);\r\n  }\r\n\r\n  btnRealizarPedido.innerHTML = \"Realizar Pedido\";\r\n  pPrecio.innerHTML = \"Precio Total: \" + precioTotal;\r\n  pPrecio.innerHTML = `Precio Total: <span id=\"precioTotal\">${precioTotal}</span>`;\r\n\r\n\r\n  h1Carrito.textContent = \"Carrito\";\r\n  agregarHijos(\r\n    [h1Carrito, listaCarrito, pPrecio, btnRealizarPedido],\r\n    sectionCarrito\r\n  );\r\n  contenido.appendChild(sectionCarrito);\r\n}\r\n\r\n\r\n\r\nasync function actualizarPrecioTotalCarrito(){\r\n    let contenedorPrecioTotal = document.getElementById('precioTotal');\r\n    let carrito = obtenerCarrito();\r\n    let precioTotal = 0;\r\n    console.log(carrito);\r\n\r\n    for (const id in carrito) {\r\n       console.log(id);\r\n       let producto = await obtenerProductoPorId(id);\r\n       precioTotal += producto.price * carrito[id];\r\n    }\r\n    \r\n\r\n    contenedorPrecioTotal.innerHTML = precioTotal;\r\n}\r\n\r\nfunction actualizarUnidadesCarrito(elemento, id) {\r\n  console.log(obtenerUnidadesProductoCarrito(id));\r\n\r\n  elemento.innerHTML = obtenerUnidadesProductoCarrito(id);\r\n}\r\n\r\nfunction eliminarUnidadesCarrito(id) {\r\n  let carrito = obtenerCarrito();\r\n  if (carrito[id] - 1 < 1) {\r\n    delete carrito[id];\r\n  } else {\r\n    carrito[id]--;\r\n  }\r\n\r\n  localStorage.setItem(\"carrito\", JSON.stringify(carrito));\r\n  return carrito[id];\r\n}\r\n\r\nfunction eliminarProductoCarrito(id) {\r\n  let carrito = obtenerCarrito();\r\n  delete carrito[id];\r\n  localStorage.setItem(\"carrito\", JSON.stringify(carrito));\r\n}\r\n\r\n/**\r\n * Obtiene las unidades que hay de un producto en el carrito\r\n * @param {*} id Id del producto\r\n * @returns Numero de unidades\r\n */\r\nfunction obtenerUnidadesProductoCarrito(id) {\r\n  let carrito = obtenerCarrito();\r\n  return carrito[id];\r\n}\r\n\r\n/**\r\n * Agrega un producto al carrito\r\n * @param {*} id Id del producto\r\n */\r\nfunction agregarCarrito(id) {\r\n  if (obtenerCarrito()) {\r\n    let carrito = obtenerCarrito();\r\n    let unidades = 1;\r\n\r\n    if (carrito[id]) {\r\n      unidades = carrito[id] + 1;\r\n    }\r\n    carrito[id] = unidades;\r\n    localStorage.setItem(\"carrito\", JSON.stringify(carrito));\r\n  } else {\r\n    let objCarrito = {};\r\n    objCarrito[id] = 1;\r\n    localStorage.setItem(\"carrito\", JSON.stringify(objCarrito));\r\n  }\r\n}\r\n\r\n/**\r\n * Obtiene el carrito\r\n * @returns Objeto Carrito\r\n */\r\nfunction obtenerCarrito() {\r\n  if (localStorage.getItem(\"carrito\")) {\r\n    return JSON.parse(localStorage.getItem(\"carrito\"));\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n"],"names":[],"version":3,"file":"index.0c6c9fff.js.map","sourceRoot":"/__parcel_source_root/"}