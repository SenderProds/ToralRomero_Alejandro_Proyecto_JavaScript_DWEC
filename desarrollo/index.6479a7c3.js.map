{"mappings":"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","sources":["fuente/js/sesion.js"],"sourcesContent":["//Registro\r\n\r\nrecargarSesion();\r\n\r\nfunction recargarSesion() {\r\n  let liBtnIniciarSesion =\r\n    document.getElementById(\"btnIniciarSesion\").parentElement;\r\n  let liBtnRegistro = document.getElementById(\"btnRegistro\").parentElement;\r\n  let liBtnPrincipal = document.getElementById(\"btnPrincipal\").parentElement;\r\n  let liBtnCerrarSesion =\r\n    document.getElementById(\"btnCerrarSesion\").parentElement;\r\n\r\n  if (localStorage.getItem(\"sesion\") == \"true\") {\r\n    liBtnIniciarSesion.classList.add(\"ocultar\");\r\n    liBtnRegistro.classList.add(\"ocultar\");\r\n\r\n    liBtnPrincipal.classList.remove(\"ocultar\");\r\n    liBtnCerrarSesion.classList.remove(\"ocultar\");\r\n  } else {\r\n    liBtnIniciarSesion.classList.remove(\"ocultar\");\r\n    liBtnRegistro.classList.remove(\"ocultar\");\r\n\r\n    liBtnPrincipal.classList.add(\"ocultar\");\r\n    liBtnCerrarSesion.classList.add(\"ocultar\");\r\n    cargarProductos();\r\n  }\r\n}\r\n\r\nbtnRegistro.addEventListener(\"click\", (e) => {\r\n  resetearContenido();\r\n  ocultarContenido([formIniciarSesion, contenido]);\r\n  contenido.classList.remove(\"display-flex\");\r\n\r\n  document.body.style.height = \"100vh\";\r\n  formRegistro.classList.remove(\"ocultar\");\r\n  formRegistro.classList.add(\"registro\");\r\n});\r\n\r\nformRegistro.addEventListener(\"keydown\", (e) => {\r\n  if (\r\n    !e.target.previousElementSibling.previousElementSibling.value != \" \" &&\r\n    e.target.previousElementSibling.previousElementSibling != null\r\n  ) {\r\n    e.preventDefault();\r\n    formRegistro.appendChild(\r\n      mensajeErrorFormulario(\r\n        \"Los campos anteriores tienen que ser validos\",\r\n        formRegistro\r\n      )\r\n    );\r\n  }\r\n\r\n  \r\n});\r\n\r\nformRegistro.addEventListener(\"submit\", (e) => {\r\n  e.preventDefault();\r\n  let inputsRegistro = document.querySelectorAll(\r\n    '#registro input:not([type=\"submit\"])'\r\n  );\r\n\r\n  console.log(inputsRegistro);\r\n  let camposRellenos = Array.from(inputsRegistro).every((campo) => {\r\n    return campo.value != \"\";\r\n  });\r\n\r\n  if (camposRellenos) {\r\n    console.log(\"Agregando\");\r\n    agregarUsuario(inputsRegistro);\r\n    document.body.style.height = \"100vh\";\r\n    resetearContenido();\r\n    ocultarContenido([formRegistro, contenido]);\r\n    contenido.classList.remove(\"display-flex\");\r\n    formIniciarSesion.classList.remove(\"ocultar\");\r\n    formIniciarSesion.classList.add(\"login\");\r\n  }\r\n});\r\n\r\n//Iniciar Sesion\r\n\r\nbtnIniciarSesion.addEventListener(\"click\", (e) => {\r\n  document.body.style.height = \"100vh\";\r\n  resetearContenido();\r\n  ocultarContenido([formRegistro, contenido]);\r\n  contenido.classList.remove(\"display-flex\");\r\n  formIniciarSesion.classList.remove(\"ocultar\");\r\n  formIniciarSesion.classList.add(\"login\");\r\n});\r\n\r\n//Formulario de inicio de sesion\r\nformIniciarSesion.addEventListener(\"submit\", (e) => {\r\n  e.preventDefault();\r\n  let username = document.getElementById(\"username\").value;\r\n  let password = document.getElementById(\"password\").value;\r\n  iniciarSesion(username, password);\r\n});\r\n\r\nbtnCerrarSesion.addEventListener(\"click\", (e) => {\r\n  localStorage.setItem(\"sesion\", false);\r\n  recargarSesion();\r\n});\r\n\r\n/**\r\n * Lo elementos que esten visibles se ocultan\r\n * @param {*} param0 Elementos\r\n */\r\nfunction ocultarContenido([...elementos]) {\r\n  elementos.forEach((elemento) => {\r\n    if (!elemento.classList.contains(\"ocultar\")) {\r\n      elemento.classList.add(\"ocultar\");\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Si las credenciales son correctas iniciar sesion\r\n * @param {*} usr Nombre de usuario\r\n * @param {*} password Clave del usuario\r\n */\r\nfunction iniciarSesion(usr, password) {\r\n  let resultado = comprobarUsuario(usr, password);\r\n  console.log(resultado);\r\n\r\n  if (resultado) {\r\n    localStorage.setItem(\"sesion\", true);\r\n    formIniciarSesion.classList.add(\"ocultar\");\r\n    contenido.classList.remove(\"ocultar\");\r\n    contenido.classList.add(\"display-flex\");\r\n    productosFiltros.classList.add(\"display-flex\");\r\n    productosFiltros.classList.remove(\"ocultar\");\r\n    productosContenedor.classList.remove(\"ocultar\");\r\n\r\n    document.body.style.height = \"auto\";\r\n    recargarSesion();\r\n  } else {\r\n    formIniciarSesion.appendChild(\r\n      mensajeErrorFormulario(\r\n        \"El nombre de usuario o clave no es correcto\",\r\n        formIniciarSesion\r\n      )\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Devuelve si alguno de los usuarios en el almacenamiento coincide con las credenciales\r\n * @param {*} username Nombre de usuario\r\n * @param {*} password Clave del usuario\r\n * @returns Booleano\r\n */\r\nfunction comprobarUsuario(username, password) {\r\n  let usuarios = getUsuarios();\r\n\r\n  return usuarios.some((objeto) => {\r\n    return objeto.username == username && objeto.password == password;\r\n  });\r\n}\r\n\r\n/**\r\n * Retorna un array con todos los usuarios de la api\r\n * @returns Array usuarios\r\n */\r\nfunction getUsuarios() {\r\n  return JSON.parse(localStorage.getItem(\"users\"));\r\n}\r\n\r\n/**\r\n * Agrega el usuario al almacenamiento local\r\n * @param {*} campos Todos los campos del formulario\r\n */\r\nfunction agregarUsuario(campos) {\r\n  let nombre = document.getElementById(\"nombre\").value;\r\n  let apellidos = document.getElementById(\"apellidos\").value;\r\n  let telefono = document.getElementById(\"telefono\").value;\r\n  let correo = document.getElementById(\"correo\").value;\r\n  let dni = document.getElementById(\"dni\").value;\r\n  let edad = document.getElementById(\"edad\").value;\r\n  let username = document.getElementById(\"usernameReg\").value;\r\n  let password = document.getElementById(\"passwordReg\").value;\r\n\r\n  let usuarios = getUsuarios();\r\n\r\n  let nuevoUsuario = {\r\n    name: {\r\n      firstname: nombre,\r\n      lastname: apellidos,\r\n    },\r\n    password: password,\r\n    phone: telefono,\r\n    email: correo,\r\n    username: username,\r\n    dni: dni,\r\n    edad: edad,\r\n  };\r\n\r\n  usuarios.push(nuevoUsuario);\r\n\r\n  localStorage.setItem(\"users\", JSON.stringify(usuarios));\r\n}\r\n"],"names":[],"version":3,"file":"index.6479a7c3.js.map","sourceRoot":"/__parcel_source_root/"}